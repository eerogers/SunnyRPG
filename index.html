<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>RPG</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <link rel="stylesheet" type="text/css" href="style.css">
</head>
<body>
    <div class="container">
        <div class="row">
            <div class="col-md-10">
                <h1>"The Gang Fights for Paddy's Pub"</h1>
            </div>
            <div class="col-md-2"></div>
        </div>
        <div class="row characters"></div>
        <div class="row gameplay">
            <div class="protag col-md-4"></div>
            <div class="fight col-md-2"></div>
            <div class="antag col-md-4"></div>
            <div class="col-md-2"></div>
        </div>
    </div>
<script
  src="http://code.jquery.com/jquery-2.2.4.js"
  integrity="sha256-iT6Q9iMJYuQiMWNd9lDyBUStIq/8PuOW33aOqmvFpqI="
  crossorigin="anonymous"></script>
<script type="text/javascript">
$(document).ready(function() {
    // array of char objs
    var charArr = [
        {
            name: "Dennis",
            hp: 30,
            image: "dennis.png",
            charImage: "dennischar.png",
            baseattack: 2,
            attack: 2,
            counter: 4
        },
        {
            name: "Dee",
            hp: 30,
            image: "dee.png",
            charImage: "deechar.png",
            baseattack: 4,
            attack: 4,
            counter: 5
        },  
        {
            name: "Charlie",
            hp: 30,
            image: "charlie.png",
            charImage: "charliechar.png",
            baseattack: 3,
            attack: 3,
            counter: 2

        },  
        {
            name: "Mac",
            hp: 30,
            image: "mac.png",
            charImage: "macchar.png",
            baseattack: 1,
            attack: 1,
            counter: 2
        },
        {
            name: "Frank",
            hp: 30,
            image: "frank.png",
            charImage: "frankchar.png",
            baseattack: 3,
            attack: 3,
            counter: 2
        },
    ]
    // chosen hero obj
    var chosenHero
    // is here chosen bool
    var isHeroChosen
    // is hero alive bool
    var isHeroAlive
    // chosen enemy obj
    var chosenEnemy
    // is enemy chosen bool
    var isEnemyChosen
    // is enemy alive bool
    var isEnemyAlive

    var defeated = 0

    // init game function
    function initGame () {
        isHeroChosen = false
        isEnemyChosen = false
        var num = Math.floor(12/ charArr.length)
        for (var i =0; i<charArr.length; i++) {
            var charThing = $("<div id='character-"+i+"' class='char col-md-"+num+"'value='"+i+"'></div>")
            charThing.html(
                "<img src='"+charArr[i].image+"' id='mug' style='width:150px;height:150px;'/><h3>"+charArr[i].name+"</h3>"
            )
            $(".characters").append(charThing)
        }
    }

   $(document).on("click", ".char", function() {
       if (!isHeroChosen) {
        chosenHero=[$(this).attr("value")]
       // console.log(chosenHero)
        isHeroChosen= true
        $(this).addClass("fader")
        $(".protag").html(
           "<img src='"+charArr[chosenHero].charImage+"' id='avatar' style='width:150px;height:150px;'/><h3 id='hHP'>"+charArr[chosenHero].hp+"</h3>")
       }

       else if (!isEnemyChosen) {
        chosenEnemy=[$(this).attr("value")]
       // console.log(chosenEnemy)
       isEnemyChosen= true
       $(this).addClass("fader")
       $(".antag").html(
           "<img src='"+charArr[chosenEnemy].charImage+"' id= 'avatar' style='width:150px;height:150px;'/><h3 id='eHP'>"+charArr[chosenEnemy].hp+"</h3>")
           $(".fight").append("<div id='vs'>VS</div>")
           $(".fight").append("<div><button id='attack'>FIGHT</button></div>")
       }

       //need function to declare victory at the end and reset game

    })
    // attack function
    $(document).on("click", "#attack", function() {
        charArr[chosenHero].hp = charArr[chosenHero].hp - Math.floor(Math.random()*charArr[chosenEnemy].counter)
        console.log(charArr[chosenHero].hp)
        $("#hHP").text(charArr[chosenHero].hp)
        charArr[chosenEnemy].hp = charArr[chosenEnemy].hp - Math.floor(Math.random()*charArr[chosenHero].attack)
        charArr[chosenHero].attack = charArr[chosenHero].attack + charArr[chosenHero].baseattack
        console.log(charArr[chosenHero].attack)
        $("#eHP").text(charArr[chosenEnemy].hp)

        if (charArr[chosenEnemy].hp <= 0) {
           isEnemyChosen= false
           $(".antag").empty()
           $(".fight").empty()
           defeated= defeated + 1 
       }

       if (defeated === 4) {
           $(".fight").html("<div id='vic'>" + charArr[chosenHero].name + " Won Paddy's!</div>")
       }
    })
    initGame()
    // reset game function
})
    
</script>
</body>
</html>
